= javascript_include_tag "//mct-helpdesk.herokuapp.com/embed.js"

- app_name = Rails.application.class.parent_name.underscore.dasherize
javascript:
  var enableHelpdesk = function() {
    $('#jsLaunchHelpdesk').on('click', function() {
      Helpdesk.load()
      return false
    });
  }

- if app_name == "account-center"
  javascript:
    Helpdesk.appName = "Accounts";
    Helpdesk.accountCenterUserId = "#{@current_person.try(:id) or ''}";
    Helpdesk.accountCenterOrganizationId = "#{@current_person.try(:organization_id) or ''}";
    enableHelpdesk()
- elsif app_name == "check-ins"
  javascript:
    Helpdesk.appName = "Check-Ins";
    Helpdesk.accountCenterUserId = "#{@user.id}";
    Helpdesk.accountCenterOrganizationId = "#{@organization.id}";
    enableHelpdesk()
- else
  javascript:
    console.warn('The interfaces_helpdesk helper has not been implemented in this app. See `app/views/intefaces/_helpdesk.slim` in Interfaces');
