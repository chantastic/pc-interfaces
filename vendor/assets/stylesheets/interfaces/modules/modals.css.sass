@import 'interfaces/core/queries'
@import 'interfaces/core/utilities'

// localized variables  ====================================
$max-modal-width: $max-site-width * .95


// @mixins - fixed scrollable component ====================
=fixed-scrollable-component($component)
  .#{$component}
    @content

=fixed-scrollable-component-parent($component)
  .#{$component}--open
    overflow: hidden

  .#{$component}--open .#{$component}-layer
    display: block

  .#{$component}--open .#{$component}-layer .#{$component}
    display: block

=fixed-scrollable-component-stage($component)
  .#{$component}-layer
    position: fixed
    top: 0
    right: 0
    bottom: 0
    left: 0

    z-index: 1000

    overflow: auto
    overflow-y: scroll
    -webkit-overflow-scrolling: touch

    @content


// modal component - structure =============================
+fixed-scrollable-component('modal')
  display: none

  margin: 52px auto 0

  background-color: $modal-window-bg-color

  +border-radius(($modal-radius + 1) ($modal-radius + 1) $modal-radius $modal-radius)
  +box-shadow(0 0 25px $dark-gray)

  +breakpoint(lte_palm)
    margin: 3% auto !important
    width: 94% !important
    min-width: inherit !important
    max-width: inherit !important

+fixed-scrollable-component-parent('modal')

+fixed-scrollable-component-stage('modal')
  display: none

  background-color: $modal-bg-color
  background-color: $modal-bg-color


// modal component - sizing ================================
.modal,
.modal--medium
  max-width: 600px

.modal--small
  max-width: 500px

.modal--large
  max-width: 900px

.modal--full
  width: 95%
  max-width: $max-modal-width

+breakpoint(bp_1)
  .modal-layer
    padding: 0 15px

// vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
// vvvvvv ANYTHING UNSTABLE SHOULD GO BELOW THIS LINE vvvvvv
// vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv


// modal component - immediate child elements ==============
.modal__header
  padding: 1.65rem 1.75rem 2rem 1.75rem
  background: $modal-header-color

  +border-radius($modal-radius $modal-radius 0 0)

.modal__body
  padding: 1.25rem

  +breakpoint(lte_tablet)
    height: 100%

.modal__footer
  padding: 1rem 1rem 1.1rem 1rem

  text-align: right

  +border-bottom-radius($modal-child-radius)
  border-top: solid 1px adjust-color($modal-window-bg-color, $lightness: -10%, $saturation: -5%)

  .btn
    margin-bottom: 0

  .btn.left
    position: relative

    top: 2px
    left: 2px

    margin: 0

.modal-section
  padding: 1.5rem 0
  +clearfix

// modal component - immediate child elements ==============

//remove padding from top of first section
.modal-well .modal-section:first-child
  padding-top: 0

//remove padding from bottom of last section
.modal-well .modal-section:last-child
  padding-bottom: 0

.modal-well .modal-section.modal-section--subtle
  padding: 1.5rem
  &.control-group
    padding: .75rem  

.modal__header, .modal__footer, .modal__body
  +clearfix

.modal-well .modal-section:last-child
  padding-bottom: 0

.modal-section
  padding: 1.5rem 0

.modal-title
  margin: 0

  +font-size(19)
  color: $modal-title-color
  +truncate()
  text-shadow: 0 1px 4px rgba(adjust-color($modal-header-color, $lightness: -20%, $saturation: -5%), .5)

.modal-well__heading
  font-size: 1.3em
  padding-bottom: .75rem
  // border-bottom: 1px solid #E9E9E9  

.modal-well__sub-heading  
  font-size: 1.1em
  margin-bottom: .5rem

//WELLS AND OTHER LAYOUT COMPONENTS FOR MODALS
.modal-well
  +clearfix
  +border-radius(2px)
  background: #fff
  padding: 1.25rem
  border: 1px solid adjust-color($sidebar-bg-color, $lightness: -3%, $saturation: -10%)
  p
    padding: 0
    &:last-child
      margin: 0
  .col:first-of-type
    padding-left: 0
  .col:last-of-type
    padding-right: 0
  &.push-top
    margin-top: 1.5rem
  &.modal-well--padless
    padding: 0
    border: 0

.modal-section--subtle
  background: adjust-color($sidebar-bg-color, $lightness: 1%, $saturation: -10%)
  padding: 1rem
  border-radius: 3px

/*.modal__header*/
  /*.close-reveal-modal*/
  /*  position: absolute*/
  /*  top: 0.5rem*/
  /*  right: 0.6875rem*/

  /*  font-size: 1.375rem*/
  /*  font-weight: bold*/
  /*  line-height: 1*/
  /*  color: #aaaaaa*/

  /*  cursor: pointer*/

  /*+breakpoint(bp_2)*/
  /*  +border-top-radius($modal-child-radius)*/

/*@media only screen and (min-width: 47.95em)*/
/*  .reveal-modal-bg*/
/*    background: $modal-bg-color*/
/*    background: rgba($modal-bg-color, 0.98)*/
/*  .reveal-modal*/
/*    top: 6.25rem*/
/*    left: 50%*/
/*    right: auto*/
/*    bottom: auto*/
/*    width: 80%*/
/*    margin-left: -40%*/
/*    height: auto*/
/*    //NOT SURE ABOUT THIS*/
/*    // position: fixed*/
/*    //@end NOT SURE ABOUT THIS*/
/*    &.modal--small*/
/*      max-width: 500px*/
/*      margin-left: -250px*/
/*    &.modal--medium*/
/*      max-width: 660px*/
/*      margin-left: -330px          */
/**/
/*  .modal__body*/
/*    //NOT SURE ABOUT THIS*/
/*    // max-height: 470px*/
/*    // overflow-y: auto*/
/*    // overflow-x: hidden*/
/*    //@end NOT SURE ABOUT THIS*/
/**/
/*@media only screen and (min-width: 61.25em)*/
/*  .reveal-modal*/
/*    max-width: 900px*/
/*    margin-left: -450px*/
/*@media only screen and (min-width: 92.5em)*/
/*  .reveal-modal*/
/*    &.xlarge*/
/*      margin-left: -600px*/
/*      max-width: 1200px*/

/*.reveal-modal .blank-state*/
/*  margin: 0*/
/*  min-height: 40px*/
